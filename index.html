<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞—Ç–∞–ª–æ–≥ –¥–æ–º–∞—à–Ω–µ–π –∞–ø—Ç–µ—á–∫–∏ - –í—Ö–æ–¥</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üíä –ö–∞—Ç–∞–ª–æ–≥ –¥–æ–º–∞—à–Ω–µ–π –∞–ø—Ç–µ—á–∫–∏</h1>
            <p class="subtitle">–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞–º–∏ –∏ —Å–ª–µ–¥–∏—Ç–µ –∑–∞ —Å—Ä–æ–∫–∞–º–∏ –≥–æ–¥–Ω–æ—Å—Ç–∏</p>
        </header>

        <main class="auth-container">
            <div class="auth-tabs">
                <button class="tab-btn active" id="loginTab">–í—Ö–æ–¥</button>
                <button class="tab-btn" id="registerTab">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
            </div>

            <div class="auth-form" id="loginForm">
                <h2>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
                <form id="loginFormElement">
                    <div class="form-group">
                        <label for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" required placeholder="–≤–∞—à@email.com">
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">–ü–∞—Ä–æ–ª—å</label>
                        <input type="password" id="loginPassword" required placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                    </div>
                    <button type="submit" class="btn btn-primary">–í–æ–π—Ç–∏</button>
                </form>
                <div id="loginMessage" class="message"></div>
            </div>

            <div class="auth-form" id="registerForm" style="display: none;">
                <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
                <form id="registerFormElement">
                    <div class="form-group">
                        <label for="registerEmail">Email</label>
                        <input type="email" id="registerEmail" required placeholder="–≤–∞—à@email.com">
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">–ü–∞—Ä–æ–ª—å</label>
                        <input type="password" id="registerPassword" required placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤">
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</label>
                        <input type="password" id="confirmPassword" required placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                    </div>
                    <button type="submit" class="btn btn-primary">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                </form>
                <div id="registerMessage" class="message"></div>
            </div>

            <div class="app-features">
                <h3>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:</h3>
                <ul>
                    <li>üìã –£—á–µ—Ç –ª–µ–∫–∞—Ä—Å—Ç–≤ –∏ —Å—Ä–æ–∫–æ–≤ –≥–æ–¥–Ω–æ—Å—Ç–∏</li>
                    <li>‚è∞ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è</li>
                    <li>üîî –ü—É—à-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ</li>
                    <li>üì± –î–æ—Å—Ç—É–ø —Å –ª—é–±–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</li>
                </ul>
            </div>
        </main>

        <footer class="footer">
            <p>¬© 2026 –ö–∞—Ç–∞–ª–æ–≥ –¥–æ–º–∞—à–Ω–µ–π –∞–ø—Ç–µ—á–∫–∏ | –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è –≤–∞—à–µ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="auth.js"></script>
    <script>
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ñ–æ—Ä–º–∞–º–∏ –≤—Ö–æ–¥–∞ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
        document.getElementById('loginTab').addEventListener('click', function() {
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('registerForm').style.display = 'none';
            this.classList.add('active');
            document.getElementById('registerTab').classList.remove('active');
        });

        document.getElementById('registerTab').addEventListener('click', function() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('registerForm').style.display = 'block';
            this.classList.add('active');
            document.getElementById('loginTab').classList.remove('active');
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º
        document.getElementById('loginFormElement').addEventListener('submit', async function(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            const messageElement = document.getElementById('loginMessage');
            messageElement.textContent = '–í—Ö–æ–¥...';
            messageElement.className = 'message info';

            try {
                const { data, error } = await window.supabase.auth.signInWithPassword({
                    email: email,
                    password: password
                });

                if (error) throw error;
                
                messageElement.textContent = '–í—Ö–æ–¥ —É—Å–ø–µ—à–µ–Ω! –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ...';
                messageElement.className = 'message success';
                setTimeout(() => {
                    window.location.href = 'dashboard.html';
                }, 1000);
            } catch (error) {
                messageElement.textContent = '–û—à–∏–±–∫–∞: ' + error.message;
                messageElement.className = 'message error';
            }
        });

        document.getElementById('registerFormElement').addEventListener('submit', async function(e) {
            e.preventDefault();
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (password !== confirmPassword) {
                document.getElementById('registerMessage').textContent = '–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç';
                document.getElementById('registerMessage').className = 'message error';
                return;
            }

            const messageElement = document.getElementById('registerMessage');
            messageElement.textContent = '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è...';
            messageElement.className = 'message info';

            try {
                const { data, error } = await window.supabase.auth.signUp({
                    email: email,
                    password: password
                });

                if (error) throw error;
                
                messageElement.textContent = '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ email –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.';
                messageElement.className = 'message success';
            } catch (error) {
                messageElement.textContent = '–û—à–∏–±–∫–∞: ' + error.message;
                messageElement.className = 'message error';
            }
        });
    </script>
</body>
</html>
